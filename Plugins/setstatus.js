const { bot, parsedJid, validateTime, createStatusSchedule, getScheduleStatus, delScheduleStatus, deleteScheduleStatusTask, lang, } = require('../lib/')

bot( { pattern: 'setstatus ?(.*)', desc: lang.plugins.setstatus.desc, type: 'whatsapp', }, async (message, match) => { const jids = parsedJid(match) if (jids.length === 0 && match !== 'contact') { return await message.send( â•­â”â”ã€” *MOK MD* ã€•â”â”â”â¬£\nâ”ƒâœ¾  ${lang.plugins.setstatus.usage}\nâ•°â”â”â”â”â”â”â”â”â”â”â”â”â¬£ ) } if ( !message.reply_message || (!message.reply_message.image && !message.reply_message.video && !message.reply_message.txt) ) { return await message.send( â•­â”â”ã€” *MOK MD* ã€•â”â”â”â¬£\nâ”ƒâœ¾  ${lang.plugins.setstatus.reply_required}\nâ•°â”â”â”â”â”â”â”â”â”â”â”â”â¬£ ) } const statusCount = await message.setStatus(message, jids, match) await message.send( â•­â”â”ã€” *MOK MD* ã€•â”â”â”â¬£\nâ”ƒâœ¾  ${lang.plugins.setstatus.sent.format(statusCount)}\nâ•°â”â”â”â”â”â”â”â”â”â”â”â”â¬£ ) } )

bot( { pattern: 'scstatus ?(.*)', desc: lang.plugins.scstatus.desc, type: 'whatsapp', }, async (message, match) => { if (match === 'list') { const statuses = await getScheduleStatus(message.id) let msg = â•­â”â”ã€” *MOK MD* ã€•â”â”â”â¬£\nâ”ƒâœ¾  ${lang.plugins.scstatus.list} statuses.forEach((status) => { msg += \nâ”ƒâ°  Time : ${status.time}\nâ”ƒğŸ‘¥  JIDs : ${ status.jids.length > 1 ? status.jids.join(', ') : 'contact' }\nâ”ƒâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ }) msg += '\nâ•°â”â”â”â”â”â”â”â”â”â”â”â”â¬£' return await message.send(msg) } if (match.startsWith('delete')) { match = match.replace('delete', '').trim() await delScheduleStatus(match, message.id) await deleteScheduleStatusTask(match, message.id) return await message.send(â•­â”â”ã€” *MOK MD* ã€•â”â”â”â¬£\nâ”ƒâœ¾  Deleted!\nâ•°â”â”â”â”â”â”â”â”â”â”â”â”â¬£) } const [_, time] = match.split('|') const isTimeValid = validateTime(time) const jids = parsedJid(match) if ((jids.length === 0 && match.startsWith('contact')) || !isTimeValid) { return await message.send( â•­â”â”ã€” *MOK MD* ã€•â”â”â”â¬£\nâ”ƒâœ¾  ${lang.plugins.scstatus.usage}\nâ•°â”â”â”â”â”â”â”â”â”â”â”â”â¬£ ) } if ( !message.reply_message || (!message.reply_message.image && !message.reply_message.video && !message.reply_message.txt) ) { return await message.send( â•­â”â”ã€” *MOK MD* ã€•â”â”â”â¬£\nâ”ƒâœ¾  ${lang.plugins.scstatus.reply_required}\nâ•°â”â”â”â”â”â”â”â”â”â”â”â”â¬£ ) } const at = await createStatusSchedule(isTimeValid, message, jids, message.id) return await message.send( â•­â”â”ã€” *MOK MD* ã€•â”â”â”â¬£\nâ”ƒâœ¾  ${lang.plugins.scstatus.scheduled.format(at)}\nâ•°â”â”â”â”â”â”â”â”â”â”â”â”â¬£ ) } )

                                                                                                                                                                                                                                                                                                                                                                                                                                            
